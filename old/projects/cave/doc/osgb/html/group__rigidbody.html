<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>osgBullet: Rigid Body Creation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">osgBullet
   &#160;<span id="projectnumber">osgBullet 2.00.02</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Rigid Body Creation</div>  </div>
</div><!--header-->
<div class="contents">

<p>Convenience routines for creating Bullet rigid bodies from scene graphs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga660f32b5176377c91375c1f4204b7324"><td class="memItemLeft" align="right" valign="top">OSGBDYNAMICS_EXPORT btRigidBody *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rigidbody.html#ga660f32b5176377c91375c1f4204b7324">osgbDynamics::createRigidBody</a> (<a class="el" href="structosgb_dynamics_1_1_creation_record.html">osgbDynamics::CreationRecord</a> *cr)</td></tr>
<tr class="memdesc:ga660f32b5176377c91375c1f4204b7324"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a compound collision shape and rigid body from the <a class="el" href="structosgb_dynamics_1_1_creation_record.html" title="Data record for rigid body construction information.">CreationRecord</a> data.  <a href="#ga660f32b5176377c91375c1f4204b7324">More...</a><br/></td></tr>
<tr class="separator:ga660f32b5176377c91375c1f4204b7324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef5c728a52f99f2b1d5f3d87fbd54d7c"><td class="memItemLeft" align="right" valign="top">OSGBDYNAMICS_EXPORT btRigidBody *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__rigidbody.html#gaef5c728a52f99f2b1d5f3d87fbd54d7c">osgbDynamics::createRigidBody</a> (<a class="el" href="structosgb_dynamics_1_1_creation_record.html">osgbDynamics::CreationRecord</a> *cr, btCollisionShape *shape)</td></tr>
<tr class="separator:gaef5c728a52f99f2b1d5f3d87fbd54d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Convenience routines for creating Bullet rigid bodies from scene graphs. </p>
<p>These functions use the <a class="el" href="structosgb_dynamics_1_1_creation_record.html" title="Data record for rigid body construction information.">CreationRecord</a> struct to create collision shapes, rigid bodies, and motion state objects. The application is responsible for setting the <a class="el" href="structosgb_dynamics_1_1_creation_record.html" title="Data record for rigid body construction information.">CreationRecord</a> fields as needed. The fields are used as follows:</p>
<ul>
<li>
<code>_sceneGraph</code> Geometric source data for collision shape and rigid body creation. <ul>
<li>
Passed to <a class="el" href="group__collisionshapes.html#gac52edb096857e9c1b9f4f33529e3e89c" title="Creates a collision shape for each Geode in the scene graph, and assembles them into a single btCompo...">osgbCollision::btCompoundShapeFromOSGGeodes()</a> to create a collision shape. </li>
<li>
If <code>_comSet</code> is false, the <code>_sceneGraph</code> bounding sphere center is used as the center of mass. </li>
<li>
If <code>_sceneGraph</code> is a Transform node, it is set as the managed Transform node in <a class="el" href="classosgb_dynamics_1_1_motion_state.html" title="A btMotionState that works with OSG Transforms.">MotionState</a> (<a class="el" href="classosgb_dynamics_1_1_motion_state.html#a5bf2ea5763b3be2b38595a555863c151" title="Set and get a subgraph that corresponds to the rigid body owning this MotionState.">MotionState::setTransform()</a>). </li>
</ul>
</li>
<li>
<code>_com</code> When <code>_comSet</code> is true, <code>_com</code> is the center of mass. Otherwise, the bounding volume center is used as the center of mass. (See <a class="el" href="structosgb_dynamics_1_1_creation_record.html#a55861770bd464eea9c9b7d77c58392db">CreationRecord::setCenterOfMass()</a>.) <ul>
<li>
The negated center of mass multiplied by the <code>_scale</code> vector is used as a transform for geometric data during collision shape creation. </li>
<li>
The center of mass is passed to the created <a class="el" href="classosgb_dynamics_1_1_motion_state.html" title="A btMotionState that works with OSG Transforms.">MotionState</a> object (<a class="el" href="classosgb_dynamics_1_1_motion_state.html#ab4cf7c1412365048f2cad4910c08bce9">MotionState::setCenterOfMass()</a>). </li>
</ul>
</li>
<li>
<code>_scale</code> <em>xyz</em> scale vector. (osgBullet supports non-uniform scaling.) <ul>
<li>
The negated center of mass multiplied by the <code>_scale</code> vector is used as a transform for geometric data during collision shape creation. </li>
<li>
<code>_scale</code> is passed to the created <a class="el" href="classosgb_dynamics_1_1_motion_state.html" title="A btMotionState that works with OSG Transforms.">MotionState</a> object (<a class="el" href="classosgb_dynamics_1_1_motion_state.html#a9221f5cb9969036c618e5165eb9c30f7">MotionState::setScale()</a>). </li>
</ul>
</li>
<li>
<code>_parentTransform</code> Used to specify an initial position. It is set as the <a class="el" href="classosgb_dynamics_1_1_motion_state.html" title="A btMotionState that works with OSG Transforms.">MotionState</a> parent transform (<a class="el" href="classosgb_dynamics_1_1_motion_state.html#a3743fbe64731f55b1dee15f4d205e3ef" title="Set and get the initial transformation for the MotionState.">MotionState::setParentTransform()</a>).  </li>
<li>
<code>_shapeType</code> Passed to <a class="el" href="group__collisionshapes.html#gac52edb096857e9c1b9f4f33529e3e89c" title="Creates a collision shape for each Geode in the scene graph, and assembles them into a single btCompo...">osgbCollision::btCompoundShapeFromOSGGeodes()</a>.  </li>
<li>
<code>_mass</code> <ul>
<li>
Passed to btCollisionShape::calculateLocalInertia(). </li>
<li>
Set in the created rigid body via btRigidBody::btRigidBodyConstructionInfo. </li>
</ul>
</li>
<li>
<code>_restitution</code> Set in the created rigid body via btRigidBody::btRigidBodyConstructionInfo::m_restitution.  </li>
<li>
<code>_friction</code> Set in the created rigid body via btRigidBody::btRigidBodyConstructionInfo::m_friction.  </li>
<li>
<code>_axis</code> Passed to <a class="el" href="group__collisionshapes.html#gac52edb096857e9c1b9f4f33529e3e89c" title="Creates a collision shape for each Geode in the scene graph, and assembles them into a single btCompo...">osgbCollision::btCompoundShapeFromOSGGeodes()</a>. Ultimately, it is referenced only if <code>_shapeType</code> is <code>CYLINDER_SHAPE_PROXYTYPE</code>.  </li>
<li>
<code>_reductionLevel</code> Passed to <a class="el" href="group__collisionshapes.html#gac52edb096857e9c1b9f4f33529e3e89c" title="Creates a collision shape for each Geode in the scene graph, and assembles them into a single btCompo...">osgbCollision::btCompoundShapeFromOSGGeodes()</a>. If <code>_shapeType</code> is <code>TRIANGLE_MESH_SHAPE_PROXYTYPE</code> or CONVEX_TRIANGLEMESH_SHAPE_PROXYTYPE, this value is used to configure osgWorks geometry reduction utilities to reduce triangle count prior to creating the collision shape.  </li>
</ul>
<p>Note that these are merely convenience routines, and your application can interface directly with Bullet to create collision shapes and rigid bodies. However, you should strongly consider using these convenience routines for the following reasons:</p>
<ul>
<li>The routines are based on the <a class="el" href="structosgb_dynamics_1_1_creation_record.html" title="Data record for rigid body construction information.">CreationRecord</a> class, which supports the dot OSG file format. This allows your application to save and restore creation paramters. </li>
<li>These routines support non-origin center of mass. </li>
<li>These routines support scaled collision shapes. </li>
<li>These routines support initial transformations (for example, from the accumulated OSG local-to-world matrix in the subgraph parent's NodePath). </li>
<li>These routines automatically create a <a class="el" href="classosgb_dynamics_1_1_motion_state.html" title="A btMotionState that works with OSG Transforms.">MotionState</a> object to keep the OSG visual representation in sync with the Bullet physics representation.</li>
</ul>
<p><b>Requirements</b></p>
<ul>
<li>The root node of the subgraph (CreationRecord::_sceneGraph) must be either an osg::MatrixTransform or an osgwTools::AbsoluteModelTransform (from the osgWorks project). Other osg::Transform-derived nodes are not supported.</li>
</ul>
<p><b>Functionality Removed in v2.0</b></p>
<ul>
<li>The <em>overall</em> feature created a single collision shape around the entire subgraph. You can still obtain this same functionality by calling the <a class="el" href="group__collisionshapes.html">collision shape functions </a> directly, then passing the created collision shape to <a class="el" href="group__rigidbody.html#ga660f32b5176377c91375c1f4204b7324" title="Creates a compound collision shape and rigid body from the CreationRecord data.">createRigidBody()</a>. </li>
<li>The <em>named node</em> feature searched the subgraph for the named node, then used that node as the basis for creating the collision shape. The application is now responsible for doing this work. The FindNamedNode visitor in osgWorks can be used to find nodes with a specific name. </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga660f32b5176377c91375c1f4204b7324"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btRigidBody * osgbDynamics::createRigidBody </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structosgb_dynamics_1_1_creation_record.html">osgbDynamics::CreationRecord</a> *&#160;</td>
          <td class="paramname"><em>cr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a compound collision shape and rigid body from the <a class="el" href="structosgb_dynamics_1_1_creation_record.html" title="Data record for rigid body construction information.">CreationRecord</a> data. </p>
<p>Uses the <a class="el" href="classosgb_collision_1_1_compute_shape_visitor.html" title="A NodeVisitor that creates Bullet collision shapes for each Geode and assembles them into a single bt...">osgbCollision::ComputeShapeVisitor</a> to create a btCompoundShape from CreationRecord::_sceneGraph. Currently, a shape per Geode is created. CreationRecord::_shapeType specifies the shape type created per Geode. If CreationRecord::_shapeType is CYLINDER_SHAPE_PROXYTYPE, <a class="el" href="structosgb_dynamics_1_1_creation_record.html#ab221b40a4b948d03bdfdfd0bcbdf2f5d">CreationRecord::_axis</a> specifies the cylinder major axis. </p>

</div>
</div>
<a class="anchor" id="gaef5c728a52f99f2b1d5f3d87fbd54d7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btRigidBody * osgbDynamics::createRigidBody </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structosgb_dynamics_1_1_creation_record.html">osgbDynamics::CreationRecord</a> *&#160;</td>
          <td class="paramname"><em>cr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">btCollisionShape *&#160;</td>
          <td class="paramname"><em>shape</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is an overloaded member function, provided for convenience. It differs from the above function only in what argument(s) it accepts.</p>
<p>Use this function to create a rigid body if you have already created the collision shape. This is useful for sharing collision shapes. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 10 2013 19:23:13 for osgBullet by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
