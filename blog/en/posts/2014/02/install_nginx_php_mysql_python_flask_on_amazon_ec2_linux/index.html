<!DOCTYPE HTML>
<html>
  <head>
    <title>Shi Yin | Install Nginx PHP MySQL Python Flask on Amazon EC2 Linux AMI</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="a blog about everything in my life" />
    <meta name="author" content="Shi Yin" />
    <meta name="keywords" content="joysword, Shi Yin, Shi, Yin, personal website, portfolio, games, blog, Video Games, Jekyll, Bootstrap, Font Awesome" />
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" >
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="/en/css/style.css" rel="stylesheet" media="screen">
    <!--<link href="/css/syntax.css" rel="stylesheet" media="screen">-->

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  </head>

  <body>

    <div id="wrapper">
        <div id="sidebar">
  <a class="navbar-btn" data-toggle="collapse" data-target=".navbar-collapse">
    <i class="fa fa-bars fa-fw"></i>
  </a>
        
  <nav id="nav" class="navigation" role="navigation">
    <div class="mynav">
      <a href="/en/"><i class="fa fa-list-alt fa-fw"></i> <span>posts</span></a>
      <a href="/en/archive/"><i class="fa fa-inbox fa-fw"></i> <span>archive</span></a>
      <a href="/en/categories/"><i class="fa fa-folder fa-fw"></i> <span>categories</span></a>
      <a href="/en/tags/"><i class="fa fa-tags fa-fw"></i> <span>tags</span></a>
    </div>
    <div class="mynav">
      <a href="http://joysword.com"><i class="fa fa-home fa-fw"></i> <span>home</span></a>
    </div>
  </nav><!-- /nav -->

</div><!-- /sidebar -->

        <div class="container">
            <section class="section">
  <article>
    <h1 class="post-title">
      Install Nginx PHP MySQL Python Flask on Amazon EC2 Linux AMI
    </h1>

    	<section class="byline">
      February 17, 2014 | <i class="fa fa-folder"></i>
        
          <a href="/en/categories/#techy">techy</a>
        
        | <i class="fa fa-tags"></i>
        
          #<a href="/en/tags/#Linux">Linux</a>,
        
          #<a href="/en/tags/#Amazon">Amazon</a>,
        
          #<a href="/en/tags/#EC2">EC2</a>,
        
          #<a href="/en/tags/#AMI">AMI</a>,
        
          #<a href="/en/tags/#Nginx">Nginx</a>,
        
          #<a href="/en/tags/#PHP">PHP</a>,
        
          #<a href="/en/tags/#MySQL">MySQL</a>,
        
          #<a href="/en/tags/#Python">Python</a>,
        
          #<a href="/en/tags/#Flask">Flask</a>
        
    </section>

    <div class="post-content">
      <h2>Assumptions:</h2>

<ul>
<li>you have a brande new EC2 instance running Amazon Linux AMI</li>
<li>your time zone is <code>America/Chicago</code></li>
</ul>

<h2>Install Nginx PHP-FPM and MySQL</h2>

<h3>optional</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo /bin/rpm -ivh http://ftp.uninett.no/linux/epel/6/i386/epel-release-6-8.noarch.rpm
sudo /bin/rpm -ivh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm
sudo /bin/rpm -ivh http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm
</code></pre></div>
<h3>install nginx php mysql memcache</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo yum -y update
sudo ln -sf /usr/share/zoneinfo/America/Chicago /etc/localtime
sudo yum install -y gcc make nginx php-fpm php-devel php-mysql php-pdo php-pear php-mbstring php-cli php-odbc php-imap php-gd php-xml php-soap php-pecl-apc pcre-devel memcached php-pecl-memcached openssl-devel mysql-server mysql

sudo pecl install memcache

sudo chkconfig nginx on
sudo chkconfig mysqld on
sudo chkconfig php-fpm on
sudo chkconfig memcached on
</code></pre></div>
<h3>create files</h3>

<p><strong>create fcgi configuration file</strong>
<code>
sudo vi /etc/nginx/fcgi.conf
</code></p>

<p>in vim:
```
fastcgi<em>param GATEWAY</em>INTERFACE CGI/1.1;
fastcgi<em>param SERVER</em>SOFTWARE nginx/$nginx_version;</p>

<p>fastcgi<em>param QUERY</em>STRING $query<em>string;
fastcgi</em>param REQUEST<em>METHOD $request</em>method;
fastcgi<em>param CONTENT</em>TYPE $content<em>type;
fastcgi</em>param CONTENT<em>LENGTH $content</em>length;</p>

<p>fastcgi<em>param SCRIPT</em>FILENAME $document<em>root$fastcgi</em>script<em>name;
fastcgi</em>param SCRIPT<em>NAME $fastcgi</em>script<em>name;
fastcgi</em>param REQUEST<em>URI $request</em>uri;
fastcgi<em>param DOCUMENT</em>URI $document<em>uri;
fastcgi</em>param DOCUMENT<em>ROOT $document</em>root;
fastcgi<em>param SERVER</em>PROTOCOL $server_protocol;</p>

<p>fastcgi<em>param REMOTE</em>ADDR $remote<em>addr;
fastcgi</em>param REMOTE<em>PORT $remote</em>port;
fastcgi<em>param SERVER</em>ADDR $server<em>addr;
fastcgi</em>param SERVER<em>PORT $server</em>port;
fastcgi<em>param SERVER</em>NAME $server_name;</p>

<h1>PHP only, required if PHP was built with --enable-force-cgi-redirect</h1>

<p>fastcgi<em>param REDIRECT</em>STATUS 200;
```</p>

<p><strong>create nginx configuration file</strong>
<code>
sudo vi /etc/nginx/conf.d/default.conf
</code></p>

<p>in vim:
```
server {
        listen       80;
        server_name  localhost;
        root         /var/www; # this has to be /var/www, not /var/www/html, or static files in flask projects wonâ€™t load
        index index.php index.html index.htm;</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">    location ~ .*\\.(php|php5)?$
    {

        fastcgi_pass  unix:/var/run/php-fpm/php-fpm.sock;
        fastcgi_index index.php;
        include fcgi.conf;
    }

    location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)$
    {
        expires      30d;
    }

    location ~ .*\\.(js|css)?$
    {
        expires      12h;
    }

    access_log off;
</code></pre></div>
<p>}
```</p>

<p><strong>set php-fpm port</strong>
<code>
sudo vi /etc/php-fpm.d/www.conf
</code></p>

<p>in vim:
<code>
;listen = 127.0.0.1:9000
listen = /var/run/php-fpm/php-fpm.sock
;listen.owner = nobody
listen.owner = nginx
;listen.group = nobody
listen.group = nginx
;listen.mode = 0666
listen.mode = 0664
user = nginx
group = nginx
</code></p>

<h3>enable memcached</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo vi /etc/php.d/memcached.ini
</code></pre></div>
<p>in vim:
<code>
; Enable memcache extension module
extension=memcache.so
</code></p>

<h3>start service</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo service php-fpm start
sudo service nginx start
sudo service mysqld start
sudo service memcached start
</code></pre></div>
<h3>MILESTONE #1</h3>

<p>Browse to your server and <strong>you should get Nginx greeting page</strong><br>
<code>http://ec2-54-208-30-174.compute-1.amazonaws.com:8080/</code></p>

<h3>reference</h3>

<p>[1] http://nizhishuai.com/2014/04/19/article-148.html<br>
[2] http://codingsteps.com/install-php-fpm-nginx-mysql-on-ec2-with-amazon-linux-ami/</p>

<h2>Install Python 2.7.8</h2>

<h3>install dependencies</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo yum -y groupinstall &quot;development tools&quot;
sudo yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel 
</code></pre></div>
<h3>download and install python</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">wget http://python.org/ftp/python/2.7.8/Python-2.7.8.tar.xz
tar xf Python-2.7.8.tar.xz
cd Python-2.7.8
./configure --prefix=/usr/local  --enable-shared LDFLAGS=&quot;-Wl,-rpath /usr/local/lib&quot;
make &amp;&amp; make altinstall
</code></pre></div>
<p><strong>note:</strong>
* <code>python 2.7.8</code> will be installed at <code>/usr/local</code>
* It is critical that you use <code>make altinstall</code> when you install your custom version of Python. If you use the normal <code>make install</code> you will end up with two different versions of Python in the filesystem both named <code>python</code>. This can lead to problems that are very hard to diagnose.</p>

<h3>download and install setuptools and pip</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text"># get the setup script for setuptools:
sudo wget https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py

# install setuptools for python 2.7
sudo /usr/local/python2.7 ez_setup.py

# insall
sudo /usr/local/easy_install-2.7 pip
</code></pre></div>
<h3>install virtual environment</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo /usr/local/pip2.7 install virtualenv
</code></pre></div>
<h3>reference</h3>

<p>[3] http://toomuchdata.com/2014/02/16/how-to-install-python-on-centos/ </p>

<h2>Install Flask and testing app</h2>

<h3>install flask</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo mkdir /var/www # optional, for Amazon Linux AMI, this is created by default
sudo mkdir /var/www/demoapp

# set the owner of demoapp directory to ec2-user
sudo chown -R ec2-user:ec2-user /var/www/demoapp/

cd /var/www/demoapp

# make sure this virtualenv is for python2.7.8 we just installed, if not, use virtualenv-2.7 instead

# create a new virtual environment called venv
virtualenv venv

# activate venv
. venv/bin/activate

# install flask in venv
pip install flask
</code></pre></div>
<h3>install testing app</h3>

<p><strong>create main python script</strong>
<code>
vi hello.py
</code></p>

<p>in vim:
```python
from flask import Flask
app = Flask(<strong>name</strong>)</p>

<p>@app.route(&quot;/&quot;)
def hello():
    return &quot;Hello World!&quot;</p>

<p>if <strong>name</strong> == &quot;<strong>main</strong>&quot;:
    app.run(host=&#39;0.0.0.0&#39;, port=8080)
```</p>

<h3>MILESTONE #2</h3>

<p>Run the script of the testing app
<code>
python hello.py
</code></p>

<p>Browse to your server&#39;s port 8080 and see the app in action<br>
<code>http://ec2-54-208-30-174.compute-1.amazonaws.com:8080/</code></p>

<p><strong>You should see &#39;Hello World!&#39;</strong></p>

<h2>Install and configure uWSGI</h2>

<h3>install uwsgi</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">pip install uwsgi

# back up current nginx conf
sudo mv /etc/nginx/conf.d/default.conf /etc/nginx/conf.d/default.conf.bak
</code></pre></div>
<h3>create demoapp configuration file</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">vi demoapp_nginx.conf
</code></pre></div>
<p>in vim:
```
server {
    listen      80;
    server<em>name localhost;
    charset     utf-8;
    client</em>max<em>body</em>size 75M;</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">location / { try_files $uri @yourapplication; }
location @yourapplication {
    include uwsgi_params;
    uwsgi_pass unix:/var/www/demoapp/demoapp_uwsgi.sock;
}
</code></pre></div>
<p>} 
```</p>

<h3>symlink demoapp configuration file to nginx configuration file</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo ln -s /var/www/demoapp/demoapp_nginx.conf /etc/nginx/conf.d/
sudo /etc/init.d/nginx restart
</code></pre></div>
<h3>MILESTONE #3</h3>

<p>Browse to your server&#39;s public ip address and you will see <strong>502 Bad Gateway</strong> error<br>
<code>http://ec2-54-208-30-174.compute-1.amazonaws.com/</code></p>

<p>This is what we expected. It means that Nginx has an issue connecting to uWSGI, our Python application host.</p>

<p>In <code>demoapp_nginx.conf</code> we have this line:
<code>
uwsgi_pass unix:/var/www/demoapp/demoapp_uwsgi.sock;
</code>
It says that we would like Nginx and uWSGI to communicate using this socket file. But we haven&#39;t configured uWSGI yet, and this file doesn&#39;t exist, for now.</p>

<h3>configure demoapp uwsgi configuration file</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">vi demoapp_uwsgi.ini # note that we are still in /var/www/demoapp
</code></pre></div>
<p>in vim:
```
[uwsgi]</p>

<h1>application&#39;s base folder</h1>

<p>base = /var/www/demoapp</p>

<h1>python module to import</h1>

<p>app = hello
module = %(app)</p>

<p>home = %(base)/venv
pythonpath = %(base)</p>

<h1>socket file&#39;s location</h1>

<p>socket = /var/www/demoapp/%n.sock</p>

<h1>permissions for the socket file</h1>

<p>chmod-socket = 666</p>

<h1>chown-socket = nginx:nginx</h1>

<h1>if chown-socket, uwsgi needs to be run using sudo, which will make the log&#39;s owner root</h1>

<h1>the variable that holds a flask application inside the module imported at line #6</h1>

<p>callable = app</p>

<h1>location of log files</h1>

<p>logto = /var/log/uwsgi/%n.log 
``<code>
**note:**
*  Nginx versions from other repositories may use a user</code>www-data<code>instead of</code>nginx`</p>

<h3>create directory for uwsgi log</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">sudo mkdir -p /var/log/uwsgi
sudo chown -R ec2-user:ec2-user /var/log/uwsgi
</code></pre></div>
<h3>MILESTONE #4</h3>

<p>Execute uWSGI and pass it the newly created configuration file
<code>
uwsgi --ini /var/www/demoapp/demoapp_uwsgi.ini
</code></p>

<p>Browse to your server. Now nginx should be able to connect to uWSGI process<br>
<code>http://ec2-54-208-30-174.compute-1.amazonaws.com/</code></p>

<p><strong>You should see &#39;Hello World!&#39;</strong></p>

<h3>configure uwsgi emperor</h3>

<p><strong>note:</strong>
* uWSGI Emperor is for reading configuration files and spawning uWSGI processes.</p>

<p><strong>create emperor configuration file</strong>
<code>
sudo vi /etc/init/uwsgi.conf
</code></p>

<p>in vim:
```
description &quot;uWSGI&quot;
start on runlevel [2345]
stop on runlevel [06]
respawn</p>

<p>env UWSGI=/var/www/demoapp/venv/bin/uwsgi
env LOGTO=/var/log/uwsgi/emperor.log</p>

<p>exec $UWSGI --master --emperor /etc/uwsgi/vassals --die-on-term --uid nginx --gid nginx --logto $LOGTO
```</p>

<p><strong>create necessary folders</strong>
<code>
sudo mkdir /etc/uwsgi &amp;&amp; sudo mkdir /etc/uwsgi/vassals
sudo ln -s /var/www/demoapp/demoapp_uwsgi.ini /etc/uwsgi/vassals 
</code></p>

<p><strong>set the owner of the application and log folders</strong>
<code>
sudo chown -R nginx:nginx /var/www/demoapp/
sudo chown -R nginx:nginx /var/log/uwsgi/ 
</code></p>

<p><strong>modify demoapp uwsgi configuration file</strong>
<code>
vi /var/www/demoapp/demoapp_uwsgi.ini
</code></p>

<p>in vim:
```
...</p>

<h1>permissions for the socket file</h1>

<p>chmod-socket    = 644 
```</p>

<p><strong>start uwsgi</strong>
<code>
sudo start uwsgi 
</code></p>

<h3>reference</h3>

<p>[4] http://vladikk.com/2013/09/12/serving-flask-with-nginx-on-ubuntu/ </p>

<h1></h1>

<h2>Add A Second Application</h2>

<h3>Assumptions</h3>

<ul>
<li>the name of the app to be added is <code>twist</code></li>
</ul>

<h3>configure demoapp</h3>

<p><strong>remove demoapp configuration file</strong>
<code>
sudo rm /etc/nginx/conf.d/demo_uwsgi.conf
</code></p>

<p><strong>restore previously back-uped configuration file</strong>
<code>
sudo mv /etc/nginx/conf.d/default.conf.bak /etc/nginx/conf.d/default.conf
</code></p>

<p><strong>modify default configuration file</strong>
<code>
sudo vi /etc/nginx/conf.d/default.conf
</code></p>

<p>in vim:
<code>
...
location = /demoapp { rewrite ^ /demoapp/; }
location /demoapp { try_files $uri @demoapp; }
location @demoapp {
  include uwsgi_params;
  uwsgi_param SCRIPT_NAME /demoapp;
  uwsgi_modifier1 30;
  uwsgi_pass unix:/var/www/demoapp/demoapp_uwsgi.sock;
...
</code></p>

<h3>MILESTONE #5</h3>

<p>Browse to your server to check if demoapp has correct url prefix <code>demoapp</code><br>
<code>http://ec2-54-208-30-174.compute-1.amazonaws.com/demoapp</code></p>

<h3>add the new app</h3>

<p><strong>upload twist to /home/ec2-user/</strong></p>

<p><strong>move it to /var/www/</strong>
<code>
sudo mv /home/ec2-user/twist /var/www/twist
cd /var/www/twist 
</code></p>

<p><strong>modify nginx configuration</strong>
<code>
sudo vi /etc/nginx/conf.d/default.conf
</code></p>

<p>in vim:
<code>
...
location = /twist { rewrite ^ /twist/; }
location /twist { try_files $uri @twist; }
location @twist {
  include uwsgi_params;
  uwsgi_param SCRIPT_NAME /twist;
  uwsgi_modifier1 30;
  uwsgi_pass unix:/var/www/twist/twist_uwsgi.sock;
...
</code></p>

<p><strong>create twist_uwsgi.ini</strong>
<code>
vi twist_uwsgi.ini
</code></p>

<p>in vim:
```
[uwsgi]</p>

<h1>application&#39;s base folder</h1>

<p>base = /var/www/twist</p>

<h1>python module to import</h1>

<p>app = twist
module = %(app)</p>

<p>home = /var/www/demoapp/venv # home should still be the path of virtual environment
pythonpath = %(base)</p>

<h1>socket file&#39;s location</h1>

<p>socket = /var/www/twist/%n.sock</p>

<h1>permissions for the socket file</h1>

<p>chmod-socket    = 644</p>

<h1>the variable that holds a flask application inside the module imported at line #6</h1>

<p>callable = app</p>

<h1>location of log files</h1>

<p>logto = /var/log/uwsgi/%n.log 
```</p>

<p><strong>symlink it to /var/uwsgi/vassals</strong>
<code>
sudo ln -s /var/www/twist/twist_uwsgi.ini /etc/uwsgi/vassals 
</code></p>

<p><strong>set owner of twist nginx</strong>
<code>
sudo chown -R nginx:nginx /var/www/twist/ 
</code></p>

<h3>MILESTONE #6</h3>

<p>Browse to your server&#39;s public ip address with prefix <code>twist</code> and see <strong>Internal Server Error</strong> message<br>
<code>http://ec2-54-208-30-174.compute-1.amazonaws.com/twist/</code></p>

<p>This is absolutely OK. The issue here is that tweep haven&#39;t been installed. You can see more details about the error message in <code>twist_uswgi.log</code></p>

<p>Unfortunately, it is not convenient to insall tweepy, because the virtual environment is in <code>demoapp</code>, which has been set owner nginx, you (as ec2-user) cannot do play with it.</p>

<p>At this point, you have two options.</p>

<h3>option 1:</h3>

<p><strong>change the owner of the virtual environment</strong>
<code>
sudo chown -R ec2-user:ec2-user /var/www/demoapp/venv
</code></p>

<h3>option 2:</h3>

<p><strong>install a new virtualenv and change configurations accordingly</strong></p>

<p>Note that you donâ€™t need to change settings for nginx.<br>
You need to change settings for [appname]_uwsgi.ini and for uwsgi emperor</p>

<p><strong>install new virtualenv</strong>
<code>
cd ~
virtualenv venv
. ./venv/bin/activate
</code></p>

<p><strong>install tweepy</strong>
<code>
pip install flask uwsgi tweepy
</code></p>

<p><strong>modify demoapp uwsgi configuration file</strong>
<code>
cd /var/www/demoapp
sudo vi demoapp_uwsgi.ini
</code></p>

<p>in vim:
<code>
home = /home/ec2-user/venv/
</code></p>

<p><strong>modify twist uwsgi configuration file</strong>
<code>
cd ../twist
sudo vi twist_uwsgi.ini
</code></p>

<p>in vim:
<code>
home = /home/ec2-user/venv/
</code></p>

<p><strong>modify emperor configuration file</strong>
<code>
sudo vi /etc/init/uwsgi.conf
</code></p>

<p>in vim:
<code>
env UWSGI=/home/ec2-user/venv/bin/uwsgi
</code></p>

<h3>now we have a problem; permission denied when starting emperor</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">execvp(): Permission denied [core/emperor.c line 1434]
</code></pre></div>
<p><strong>fix 1:</strong> run emperor as root (works)<br>
<strong>fix 2:</strong> set owner of newly installed venv nginx (not work)<br>
<strong>fix 3:</strong> set permission of newly installed venv 777 (not work)</p>

<h3>MILESTONE #7</h3>

<p>Browse to your server&#39;s with prefix <code>twist</code> and see twist app in action<br>
<code>http://ec2-54-208-30-174.compute-1.amazonaws.com/twist/</code></p>

    </div>
    <hr>
    
    <hr>
    <div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'joysword';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </article>
</section>
<div id="footer">
    <hr>
    <div class="row">
        <p><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br> All articles are licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.<br>Copyright &copy; 2014 joysword.com
        </p>
    </div>
</div>

        </div>
        
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43448447-1', 'joysword.com');
  ga('send', 'pageview');

</script>


    </div><!-- /wrapper -->
  </body>

  <!-- JAVASCRIPTS -->
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="/js/main.js"></script>
  <!-- MathJax Section -->
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script>
    MathJax.Hub.Config({
        tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i<all.length;i+=1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
  </script>
</html>